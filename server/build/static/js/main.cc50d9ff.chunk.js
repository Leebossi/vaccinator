(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(t,e,n){},299:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n(35),r=n.n(c),i=n(15),s=n(24),o=n(5),d=n(111),l=n.n(d),j=(n(121),n(122),function(t){return t?t.toISOString().split(/[T ]/i)[0]:null}),u=function(t,e){var n;return t.length>0&&("id"===Object.keys(t[0])[0]?n=t.filter((function(t){return t.arrived.includes(j(e))})):"vaccination-id"===Object.keys(t[0])[0]&&(n=t.filter((function(t){return t.vaccinationDate.includes(j(e))})))),n},h=function(t,e){var n=new Date(e);return n.setUTCHours(24,0,0,0),t.filter((function(t){return t.arrived<n.toISOString()}))},b=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].injections;return e},O=n(16),v=n.n(O),f=n(32),x=n(33),p=n.n(x),g={getAll:function(){var t=Object(f.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get("http://localhost:3001/api/vaccinations");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},y="http://localhost:3001/api/",m={getAntiqua:function(){var t=Object(f.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get(y+"antiqua");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getSolarBuddhica:function(){var t=Object(f.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get(y+"solarbuddhica");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getZerpfy:function(){var t=Object(f.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.get(y+"zerpfy");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},S=n(3),q=function(t){var e=t.data,n=t.vaccine,c=Object(a.useState)(""),r=Object(i.a)(c,2),s=r[0],o=r[1],d=function(t){if(!t)return null;var e=t[0]&&Object.keys(t[0]);return t.filter((function(t){return e.some((function(e){return t[e].toString().toLowerCase().indexOf(s.toLowerCase())>-1}))}))}(e);return d||(d=[]),d&&0!==d.length?Object(S.jsxs)("div",{className:"table-container",children:[Object(S.jsx)("h2",{children:n}),Object(S.jsx)("div",{children:Object(S.jsx)("input",{type:"text",value:s,onChange:function(t){return o(t.target.value)},placeholder:"search"})}),Object(S.jsx)("table",{children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"id"}),Object(S.jsx)("th",{children:"order#"}),Object(S.jsx)("th",{children:"contact"}),Object(S.jsx)("th",{children:"district"}),Object(S.jsx)("th",{children:"arrived"})]}),d.map((function(t){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:t.id}),Object(S.jsx)("td",{children:t.orderNumber}),Object(S.jsx)("td",{children:t.responsiblePerson}),Object(S.jsx)("td",{children:t.healthCareDistrict}),Object(S.jsx)("td",{children:new Date(t.arrived).toLocaleString("fi-FI")})]},t.id)}))]})})]}):Object(S.jsxs)("div",{className:"table-container",children:[Object(S.jsx)("h2",{children:n}),Object(S.jsx)("div",{children:Object(S.jsx)("input",{type:"text",value:s,onChange:function(t){return o(t.target.value)}})}),"no data to display"]})},B=function(t){var e=t.vaccinations;return e&&0!==e.length?Object(S.jsxs)("div",{className:"table-container",children:[Object(S.jsx)("h2",{children:"Vaccinations"}),Object(S.jsx)("table",{children:Object(S.jsxs)("tbody",{children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:"ID"}),Object(S.jsx)("th",{children:"bottle"}),Object(S.jsx)("th",{children:"gender"}),Object(S.jsx)("th",{children:"date"})]}),e.map((function(t){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:t["vaccination-id"]}),Object(S.jsx)("td",{children:t.sourceBottle}),Object(S.jsx)("td",{children:t.gender}),Object(S.jsx)("td",{children:t.vaccinationDate})]},t["vaccination-id"])}))]})})]}):null},w=function(t){var e=t.vaccine,n=t.brand,a=t.vaccinations;return e?Object(S.jsxs)("div",{className:"statistics-card",children:[Object(S.jsx)("h2",{children:n}),Object(S.jsxs)("p",{children:["orders arrived: ",e.length]}),Object(S.jsxs)("p",{children:["amount of injections in arrived orders: ",b(e)]}),Object(S.jsxs)("p",{children:["vaccinations given: ",a]})]}):null},D=n(114),N=function(t){if(0===!t.length)return null;var e={};if(t.chartData.antiqua&&t.chartData.solarBuddhica&&t.chartData.zerpfy){var n=t.chartData.antiqua,a=t.chartData.solarBuddhica,c=t.chartData.zerpfy;e={labels:["orders arrived","# of injections in orders","vaccinations given"],datasets:[{label:"Antiqua",data:[n.orders,n.injections,n.vaccinations],backgroundColor:"rgb(251, 97, 218)"},{label:"SolarBuddhica",data:[a.orders,a.injections,a.vaccinations],backgroundColor:"rgb(97, 218, 251)"},{label:"Zerpfy",data:[c.orders,c.injections,c.vaccinations],backgroundColor:"rgb(218, 251, 97)"}]}}return Object(S.jsx)("div",{className:"chart-container",children:Object(S.jsx)(D.a,{data:e,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})},z=function(t){var e,n=t.data,a=t.date,c=u(n.solarBuddhica,a),r=u(n.antiqua,a),i=u(n.zerpfy,a),s=u(n.vaccinations,a),o=function(t,e){var n={antiqua:0,solarBuddhica:0,zerpfy:0},a=[];if(t)for(var c=0;c<t.length;c++)a.push(t[c].sourceBottle);for(var r=function(t){var c=e.find((function(e){return e.id===a[t]}));c&&("Antiqua"===c.vaccine?n.antiqua++:"SolarBuddhica"===c.vaccine?n.solarBuddhica++:"Zerpfy"===c.vaccine&&n.zerpfy++)},i=0;i<a.length;i++)r(i);return n}(s,n.antiqua.concat(n.zerpfy).concat(n.solarBuddhica)),d=function(t,e){if(!t||!e)return null;var n=new Date(e);return n.setUTCHours(24,0,0,0),t.filter((function(t){return t.vaccinationDate<n.toISOString()}))}(n.vaccinations,a),l=h(n.solarBuddhica,a),j=h(n.antiqua,a),O=h(n.zerpfy,a),v={};return n.vaccinations&&0!==n.vaccinations.length?(r&&c&&i&&(e=r.length+c.length+i.length,v={antiqua:{orders:r.length,injections:b(r),vaccinations:o.antiqua},solarBuddhica:{orders:c.length,injections:b(c),vaccinations:o.solarBuddhica},zerpfy:{orders:i.length,injections:b(i),vaccinations:o.zerpfy}}),a?Object(S.jsxs)("div",{className:"statistics-container",children:[Object(S.jsx)(w,{vaccine:r,brand:"Antiqua",vaccinations:o.antiqua}),Object(S.jsx)(w,{vaccine:c,brand:"SolarBuddhica",vaccinations:o.solarBuddhica}),Object(S.jsx)(w,{vaccine:i,brand:"Zerpfy",vaccinations:o.zerpfy}),Object(S.jsxs)("div",{className:"statistics-card",children:[Object(S.jsx)("h2",{children:"Total"}),Object(S.jsxs)("p",{children:["total orders arrived: ",e]}),Object(S.jsxs)("p",{children:["vaccinations: ",s.length]}),Object(S.jsx)("hr",{}),Object(S.jsxs)("p",{children:["total vaccinations to date ",d.length]}),Object(S.jsxs)("p",{children:["total Antiqua orders to date: ",j.length]}),Object(S.jsxs)("p",{children:["total SolarBuddhica orders to date: ",l.length]}),Object(S.jsxs)("p",{children:["total Zerpfy orders to date: ",O.length]}),Object(S.jsx)("hr",{})]}),Object(S.jsx)(N,{chartData:v})]}):Object(S.jsx)("div",{children:"no data on given date"})):null},k=function(){var t=Object(a.useState)([]),e=Object(i.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)([]),d=Object(i.a)(r,2),j=d[0],h=d[1],b=Object(a.useState)([]),O=Object(i.a)(b,2),v=O[0],f=O[1],x=Object(a.useState)([]),p=Object(i.a)(x,2),y=p[0],w=p[1],D=Object(a.useState)(new Date("2021-04-12T11:10:06.473587Z")),N=Object(i.a)(D,2),k=N[0],A=N[1],C={vaccinations:n,antiqua:j,solarBuddhica:v,zerpfy:y};return Object(a.useEffect)((function(){g.getAll().then((function(t){c(t)})),m.getAntiqua().then((function(t){h(t)})),m.getSolarBuddhica().then((function(t){f(t)})),m.getZerpfy().then((function(t){w(t)}))}),[]),Object(a.useEffect)((function(){console.log("selected date:",k)}),[k]),Object(S.jsxs)(s.a,{children:[Object(S.jsxs)("div",{className:"navbar",children:[Object(S.jsx)(s.b,{className:"nav-item",to:"/",children:"home"}),Object(S.jsx)(s.b,{className:"nav-item",to:"/vaccinations",children:"vaccinations"}),Object(S.jsx)(s.b,{className:"nav-item",to:"/antiqua",children:"Antiqua"}),Object(S.jsx)(s.b,{className:"nav-item",to:"/solarbuddhica",children:"Solar Buddhica"}),Object(S.jsx)(s.b,{className:"nav-item",to:"/zerpfy",children:"Zerpfy"}),Object(S.jsx)(l.a,{selected:k,onChange:function(t){return A(t)},dateFormat:"dd/MM/yyyy"}),Object(S.jsxs)("div",{className:"date-info",children:[Object(S.jsx)("span",{children:"showing data for"}),Object(S.jsx)("p",{children:k.toDateString()})]})]}),Object(S.jsx)("div",{className:"main-container",children:Object(S.jsxs)(o.c,{children:[Object(S.jsx)(o.a,{path:"/vaccinations",children:Object(S.jsx)(B,{vaccinations:u(n,k)})}),Object(S.jsx)(o.a,{path:"/antiqua",children:Object(S.jsx)(q,{data:u(j,k),vaccine:"Antiqua"})}),Object(S.jsx)(o.a,{path:"/solarbuddhica",children:Object(S.jsx)(q,{data:u(v,k),vaccine:"SolarBuddhica"})}),Object(S.jsx)(o.a,{path:"/zerpfy",children:Object(S.jsx)(q,{data:u(y,k),vaccine:"Zerpfy"})}),Object(S.jsx)(o.a,{path:"/",children:Object(S.jsx)(z,{data:C,date:k})})]})})]})};r.a.render(Object(S.jsx)(k,{}),document.getElementById("root"))}},[[299,1,2]]]);
//# sourceMappingURL=main.cc50d9ff.chunk.js.map